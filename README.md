# Учебный проект на 9 спринт
## Общая информация
Проект состоит из микросервисов:
1. ui - пользовательский интерфейс
2. gateway - единая точка входа, маршрутизация (Spring Cloud Gateway)
3. accounts - хранение информации о пользователях и их счетах
4. cash - операции снятия наличных/добавления денег на счет
5. transfer - перевод денег с одного счета на другой
6. exchange - конвертация валют
7. exchangegenerator - генерация курсов валют
8. blocker - блокировка сомнительных операций
9. notification - уведомления пользователям
10. shared - содержит общую конфигурацию для микросервисов
11. shared-test - содержит общую конфигурацию для тестов
В качестве сервера Service Discovery, Externalized/Distributed Config используется Consul.
В качестве сервера авторизации OAuth 2.0 используется Keycloak.
### ссылка на репозиторий
https://github.com/domovoy9812/yp_mod3.git
### команда для клонирования репозитория
```git clone https://github.com/domovoy9812/yp_mod3.git```
## Требования для запуска и настройка
### Для работы приложения требуется:
1. Java 21 версии
2. docker (проверено на версии 28.0.4)
### Настройка приложения
Общие настройки хранятся в файле [import.json](./consul/init/import.json) и автоматически загружаются в Consul при запуске
Настройки каждого микросервиса хранятся в стандартных файлах конфигурации spring boot *application.yml*.
Чтобы применить настройки безопасности в keycloak, нужно перед запуском keycloak перейти распаковать в директорию [keycloak](./keycloak) архив [pgdata.zip](./keycloak/pgdata.zip).
Других действий для настройки проекта не требуется.
### Сборка и запуск
1. Запустить Consul и Keycloak с помощью команды ```docker compose -f docker-compose-consul-keycloak.yml up -d```
2. Для сборки проекта нужно выполнить команду ```gradlew clean build```
3. Для запуска проекта в контейнере docker нужно выполнить команду ```docker compose up -d```
4. После успешного запуска главная страница основного приложения будет доступна по ссылке http://localhost:8080/main